@using BelibaHoma.BLL.Enums

@{
    ViewBag.Title = "ManualMatch";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles
{
    <link href="~/Scripts/datatable/css/jquery.dataTables.min.css" rel="stylesheet" />
}

@section scripts
{
    <script src="~/Scripts/datatable/js/jquery.dataTables.min.js"></script>
    <script>
        $(function() {
            //Catch the select change event
            $('#area-select select').change(function() {
                //alert('changed');
                // Extract the selected value
                var selectedArea = $(this).val();
                // Send the value to the appropiate action $.post
                $.post('/Rackaz/TutorTrainee/ManualMatchAreaSelected', { Area : selectedArea}, function(data) {
                    // Success function replace the contant of the html in the correct div
                    $('#area-partial').html(data);
                    //Catch the form submition -
                    $('#manual-match-submit').click(function (e) {
                        alert("Hi");
                        var SelectedTrainee = $('input[name="ChooseTrainee"]:checked').val();
                        var SelectedTutor = $('input[name="ChooseTutor"]:checked').val();
                        if (SelectedTrainee == undefined || SelectedTutor == undefined) {
                            alert("נא לבחור חניך וחונך לציוות");
                        }
                        else {
                            var model =
                            {
                                
                            }
                            $.post(url, model, function (data) {
                                alert(data.Message);
                                if (data.Success) {
                                    window.location.href = "/Rackaz/Trainee";
                                }
                            });
                        }
                    });
                }).fail(function(data) {
                    // Make sure that the data is now a html of the error page
                    $('html').html(data.responseText);
                });
            });
        });
    </script>
}


<h2>ציוות ידני</h2>
<div class="form-group">
    <label class="control-label col-md-2">אזור :</label>
    <div class="col-md-10" id="area-select">

        @{
            //if is rackaz - cannot select area for the academic institution
            object attr;
            if (ViewBag.IsRackaz)
            {
                attr = new {@class = "form-control", @disabled = "disabled"};
            }
            else
            {
                attr = new {@class = "form-control"};
            }
        }

        @Html.DropDownList("Area", EnumHelper.GetSelectList(typeof (Area)), "אנא בחר אזור", attr)
    </div>
    <div class="row" id="area-partial"></div>
</div>

