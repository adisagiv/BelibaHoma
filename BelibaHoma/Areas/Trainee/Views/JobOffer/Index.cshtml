@model IEnumerable<BelibaHoma.BLL.Models.JobOfferModel>
@using BelibaHoma.BLL.Enums
@using Extensions.Enums

@{
    ViewBag.Title = "לוח משרות";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles
{
    @Styles.Render("~/bundles/datatable/css")
}


@section scripts
{
    @Scripts.Render("~/bundles/datatable/js")
    <script src="~/Scripts/joboffer-index.js"></script>
}
<div class="well">

    <h2 align="center"><b>משרות</b></h2>

    <p>
        @{

            if (ViewBag.IsTrainee != true)
            {
                @*@Html.ActionLink("הוסף משרה", "Create", new { Area = "Rackaz" })*@
                <a class="btn btn-default" href="/Rackaz/JobOffer/Create">הוסף משרה</a>
            }
}
    </p>

    <table class="table" id="job-offer-table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.JobTitle)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.JobArea)
                </th>
                <th>
                    מסלולי לימוד רלוונטים
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Organization)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.JobType)
                </th>

                <th id="is-active">
                    @Html.DisplayNameFor(model => model.JobStatus)
                </th>

                <th></th>
            </tr>
        </thead>

        <tfoot>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.JobTitle)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.JobArea)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.AcademicMajor.Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Organization)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.JobType)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.JobStatus)
                </th>

                <th></th>
            </tr>
        </tfoot>
        <tbody>
            @{
                @*if (ViewBag.IsTrainee == true)
                {

                    foreach (var item in Model)
                    {
                        if (item.JobStatus.ToDescription() == "פעיל")
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.JobTitle)
                                </td>
                                <td>
                                    @item.JobArea.ToDescription()
                                </td>
                                <td>
                                    @item.Requirements.ToString()
                                </td>
                                <td>
                                    @item.Description.ToString()
                                </td>
                                <td>
                                    @item.AcademicMajor.Name
                                </td>
                                <td>
                                    @{
                            if (item.AcademicMajor1 != null)
                            {
                                @item.AcademicMajor1.Name
                            }
                                    }
                                </td>
                                <td>
                                    @{
                            if (item.AcademicMajor2 != null)
                            {
                                @item.AcademicMajor2.Name
                            }
                                    }
                                </td>
                                <td>
                                    @item.Organization.ToString()
                                </td>
                                <td>
                                    @item.JobType.ToDescription()
                                </td>
                                <td>
                                    @item.JobStatus.ToDescription()
                                </td>
                                <td>*@
                                    @*@Html.ActionLink("Details", "Details", new {id = item.Id})*@
                                    @*<a class="btn btn-default btn-xs" href="/Trainee/JobOffer/Details/?id=@item.Id">פרטים</a>
                                </td>
                            </tr>
                        }
                    }
                }
                else
                {*@
                    foreach (var item in Model)
                    {

                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.JobTitle)
                            </td>
                            <td>
                                @item.JobArea.ToDescription()
                            </td>

                            <td>



                                @{
                                    var string1 = "";
                                    var string2 = "";
                                    if (item.AcademicMajor1 != null)
                                    {
                                        string1 = ", " + @item.AcademicMajor1.Name;
                                    }

                                    if (item.AcademicMajor2 != null)
                                    {

                                         string2 = ", " + @item.AcademicMajor2.Name;

                                    }

                                    @String.Format("{0}{1}{2}",@item.AcademicMajor.Name, @string1, @string2)
                                    
}

                            </td>
                            <td>
                                @item.Organization.ToString()
                            </td>
                            <td>
                                @item.JobType.ToDescription()
                            </td>
                            <td>
                                @item.JobStatus.ToDescription()
                            </td>
                            <td>

                                @*@Html.ActionLink("פרטים נוספים", "Details", new { id = item.Id })*@
                                <a class="btn btn-default btn-xs" href="/Trainee/JobOffer/Details/?id=@item.Id">פרטים</a>                                
                                @{
                        if (ViewBag.IsTrainee != true)
                        {
                            @Html.Raw("|")
                            @*@Html.ActionLink("עריכה", "Edit", new { Area = "Rackaz", id = item.Id })*@
                            <a class="btn btn-default btn-xs" href="/Rackaz/JobOffer/Edit/?id=@item.Id">עריכה</a>
                        }
}
                            </td>
                        </tr>
                    }

                @*}*@
            }

        </tbody>
    </table>

    </div>



